/*  MEGA MIDI controller  Mike James  03/18/2020 (V1.0)    Requires the use of hairless-midiserial:  https://github.com/projectgus/hairless-midiserial    Written for the Arduino MEGA 2560    Code only supports potentiometers  */// Set the number of analog inputs used (for looping purposes)const int analogInputs = 8;// Setting a threshold for analog input to prevent minor fluctuations from changing valuesconst int threshold = 1;// init values for analog readsuint8_t oldValue[analogInputs]; // An array to store pot valuesuint8_t newValue = 0;void setup() {  Serial.begin(9600);}// This will cycle through each analog input on the Megavoid loop() {  for (int i = 0; i < analogInputs; i++) {     analogRead(i);    newValue = analogRead(i) >> 3;     delay(10);      // If the new value from the potentiometers is larger than the threshold, send the new MIDI value    if (abs(newValue - oldValue[i]) > threshold) {      Serial.write(0xB0);      Serial.write(i);      Serial.write(newValue);      oldValue[i] = newValue;    }   }  }